1. Придумать, как генерировать ссылки для шаблонов писем. Сделать просто константы? Сейчас ссылки генерируются на основе полей enum, в зависимости от типа запроса по почте.
+2. Login - получение Access Token и Refresh Token (для разных устройств, выдаётся свой Access Token - получается на каждый запрос логина)
2.5 А как тогда понять и предотвратить ситуацию, когда будет отправлено очень много запросов на вход? Тогда создастся на каждый запрос
новый токен. Нужна какая-то защита от множественных запросов.
+3. Logout - пометить revoked текущий Refresh Token. Отправить текущий Refresh Token.
3. Обновление Access Token.
+4. Разлогиниться на всех устройствах (отзыв всех Refresh Token)
+5. Разлогиниться на всех устройствах, кроме этого (отзыв всех Refresh Token, кроме этого). Отправить текущий Refresh Token.
+6. Refresh Token удалять или делать их revoked? -revoked
7. Какой срок жизни установить для токенов? Access - 2 часа. Refresh - 2 месяца или бессрочный
8. Предусмотреть проверку последнего использования Access Token? Добавить соответствующее поле.
Например, при каждом запросе обновления токена проводить проверку всех Refresh Token. Если последний раз обращение было
более недели (2х?) назад, то помечать его revoked.
9. Вынести из Register контроллера всё, что связано с auth. Оставить там только регистрационные данные: регистрация,
подтверждение, изменение, восстановление пароля, удаление.